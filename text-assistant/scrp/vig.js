/* Thanks to:
  http://qaz.wtf/u/convert.cgi
  https://fancytextguru.com
  https://www.nayuki.io/page/vigenere-cipher-javascript */
var vigS = (x, y) => x.split(y ? '' : ' '),
vigSL = 'abcdefghijklmnopqrstuvwxyz',
vigBigArr = vigS(vigSL.toUpperCase(), 1).concat(
  vigS(vigSL, 1),
  vigS('â’¶â’·â’¸â’¹â’ºâ’»â’¼â’½â’¾â’¿â“€â“â“‚â“ƒâ“„â“…â“†â“‡â“ˆâ“‰â“Šâ“‹â“Œâ“â“Žâ“', 1),
  vigS('â“â“‘â“’â““â“”â“•â“–â“—â“˜â“™â“šâ“›â“œâ“â“žâ“Ÿâ“ â“¡â“¢â“£â“¤â“¥â“¦â“§â“¨â“©', 1),
  vigS('ðŸ… ðŸ…‘ ðŸ…’ ðŸ…“ ðŸ…” ðŸ…• ðŸ…– ðŸ…— ðŸ…˜ ðŸ…™ ðŸ…š ðŸ…› ðŸ…œ ðŸ… ðŸ…ž ðŸ…Ÿ ðŸ…  ðŸ…¡ ðŸ…¢ ðŸ…£ ðŸ…¤ ðŸ…¥ ðŸ…¦ ðŸ…§ ðŸ…¨ ðŸ…©'),
  vigS('ï¼¡ï¼¢ï¼£ï¼¤ï¼¥ï¼¦ï¼§ï¼¨ï¼©ï¼ªï¼«ï¼¬ï¼­ï¼®ï¼¯ï¼°ï¼±ï¼²ï¼³ï¼´ï¼µï¼¶ï¼·ï¼¸ï¼¹ï¼º', 1),
  vigS('ï½ï½‚ï½ƒï½„ï½…ï½†ï½‡ï½ˆï½‰ï½Šï½‹ï½Œï½ï½Žï½ï½ï½‘ï½’ï½“ï½”ï½•ï½–ï½—ï½˜ï½™ï½š', 1),
  vigS('ð€ ð ð‚ ðƒ ð„ ð… ð† ð‡ ðˆ ð‰ ðŠ ð‹ ðŒ ð ðŽ ð ð ð‘ ð’ ð“ ð” ð• ð– ð— ð˜ ð™'),
  vigS('ðš ð› ðœ ð ðž ðŸ ð  ð¡ ð¢ ð£ ð¤ ð¥ ð¦ ð§ ð¨ ð© ðª ð« ð¬ ð­ ð® ð¯ ð° ð± ð² ð³'),
  vigS('ð•¬ ð•­ ð•® ð•¯ ð•° ð•± ð•² ð•³ ð•´ ð•µ ð•¶ ð•· ð•¸ ð•¹ ð•º ð•» ð•¼ ð•½ ð•¾ ð•¿ ð–€ ð– ð–‚ ð–ƒ ð–„ ð–…'),
  vigS('ð–† ð–‡ ð–ˆ ð–‰ ð–Š ð–‹ ð–Œ ð– ð–Ž ð– ð– ð–‘ ð–’ ð–“ ð–” ð–• ð–– ð–— ð–˜ ð–™ ð–š ð–› ð–œ ð– ð–ž ð–Ÿ'),
  vigS('ð‘¨ ð‘© ð‘ª ð‘« ð‘¬ ð‘­ ð‘® ð‘¯ ð‘° ð‘± ð‘² ð‘³ ð‘´ ð‘µ ð‘¶ ð‘· ð‘¸ ð‘¹ ð‘º ð‘» ð‘¼ ð‘½ ð‘¾ ð‘¿ ð’€ ð’'),
  vigS('ð’‚ ð’ƒ ð’„ ð’… ð’† ð’‡ ð’ˆ ð’‰ ð’Š ð’‹ ð’Œ ð’ ð’Ž ð’ ð’ ð’‘ ð’’ ð’“ ð’” ð’• ð’– ð’— ð’˜ ð’™ ð’š ð’›'),
  vigS('ð“ ð“‘ ð“’ ð““ ð“” ð“• ð“– ð“— ð“˜ ð“™ ð“š ð“› ð“œ ð“ ð“ž ð“Ÿ ð“  ð“¡ ð“¢ ð“£ ð“¤ ð“¥ ð“¦ ð“§ ð“¨ ð“©'),
  vigS('ð“ª ð“« ð“¬ ð“­ ð“® ð“¯ ð“° ð“± ð“² ð“³ ð“´ ð“µ ð“¶ ð“· ð“¸ ð“¹ ð“º ð“» ð“¼ ð“½ ð“¾ ð“¿ ð”€ ð” ð”‚ ð”ƒ'),
  vigS('ð”¸ ð”¹ â„‚ ð”» ð”¼ ð”½ ð”¾ â„ ð•€ ð• ð•‚ ð•ƒ ð•„ â„• ð•† â„™ â„š â„ ð•Š ð•‹ ð•Œ ð• ð•Ž ð• ð• â„¤'),
  vigS('ð•’ ð•“ ð•” ð•• ð•– ð•— ð•˜ ð•™ ð•š ð•› ð•œ ð• ð•ž ð•Ÿ ð•  ð•¡ ð•¢ ð•£ ð•¤ ð•¥ ð•¦ ð•§ ð•¨ ð•© ð•ª ð•«'),
  vigS('ð™° ð™± ð™² ð™³ ð™´ ð™µ ð™¶ ð™· ð™¸ ð™¹ ð™º ð™» ð™¼ ð™½ ð™¾ ð™¿ ðš€ ðš ðš‚ ðšƒ ðš„ ðš… ðš† ðš‡ ðšˆ ðš‰'),
  vigS('ðšŠ ðš‹ ðšŒ ðš ðšŽ ðš ðš ðš‘ ðš’ ðš“ ðš” ðš• ðš– ðš— ðš˜ ðš™ ðšš ðš› ðšœ ðš ðšž ðšŸ ðš  ðš¡ ðš¢ ðš£'),
  vigS('ð–  ð–¡ ð–¢ ð–£ ð–¤ ð–¥ ð–¦ ð–§ ð–¨ ð–© ð–ª ð–« ð–¬ ð–­ ð–® ð–¯ ð–° ð–± ð–² ð–³ ð–´ ð–µ ð–¶ ð–· ð–¸ ð–¹'),
  vigS('ð–º ð–» ð–¼ ð–½ ð–¾ ð–¿ ð—€ ð— ð—‚ ð—ƒ ð—„ ð—… ð—† ð—‡ ð—ˆ ð—‰ ð—Š ð—‹ ð—Œ ð— ð—Ž ð— ð— ð—‘ ð—’ ð—“'),
  vigS('ð—” ð—• ð—– ð—— ð—˜ ð—™ ð—š ð—› ð—œ ð— ð—ž ð—Ÿ ð—  ð—¡ ð—¢ ð—£ ð—¤ ð—¥ ð—¦ ð—§ ð—¨ ð—© ð—ª ð—« ð—¬ ð—­'),
  vigS('ð—® ð—¯ ð—° ð—± ð—² ð—³ ð—´ ð—µ ð—¶ ð—· ð—¸ ð—¹ ð—º ð—» ð—¼ ð—½ ð—¾ ð—¿ ð˜€ ð˜ ð˜‚ ð˜ƒ ð˜„ ð˜… ð˜† ð˜‡'),
  vigS('ð˜¼ ð˜½ ð˜¾ ð˜¿ ð™€ ð™ ð™‚ ð™ƒ ð™„ ð™… ð™† ð™‡ ð™ˆ ð™‰ ð™Š ð™‹ ð™Œ ð™ ð™Ž ð™ ð™ ð™‘ ð™’ ð™“ ð™” ð™•'),
  vigS('ð™– ð™— ð™˜ ð™™ ð™š ð™› ð™œ ð™ ð™ž ð™Ÿ ð™  ð™¡ ð™¢ ð™£ ð™¤ ð™¥ ð™¦ ð™§ ð™¨ ð™© ð™ª ð™« ð™¬ ð™­ ð™® ð™¯'),
  vigS('ð˜ˆ ð˜‰ ð˜Š ð˜‹ ð˜Œ ð˜ ð˜Ž ð˜ ð˜ ð˜‘ ð˜’ ð˜“ ð˜” ð˜• ð˜– ð˜— ð˜˜ ð˜™ ð˜š ð˜› ð˜œ ð˜ ð˜ž ð˜Ÿ ð˜  ð˜¡'),
  vigS('ð˜¢ ð˜£ ð˜¤ ð˜¥ ð˜¦ ð˜§ ð˜¨ ð˜© ð˜ª ð˜« ð˜¬ ð˜­ ð˜® ð˜¯ ð˜° ð˜± ð˜² ð˜³ ð˜´ ð˜µ ð˜¶ ð˜· ð˜¸ ð˜¹ ð˜º ð˜»'),
  vigS('â’œâ’â’žâ’Ÿâ’ â’¡â’¢â’£â’¤â’¥â’¦â’§â’¨â’©â’ªâ’«â’¬â’­â’®â’¯â’°â’±â’²â’³â’´â’µ', 1),
  vigS('ðŸ‡¦ ðŸ‡§ ðŸ‡¨ ðŸ‡© ðŸ‡ª ðŸ‡« ðŸ‡¬ ðŸ‡­ ðŸ‡® ðŸ‡¯ ðŸ‡° ðŸ‡± ðŸ‡² ðŸ‡³ ðŸ‡´ ðŸ‡µ ðŸ‡¶ ðŸ‡· ðŸ‡¸ ðŸ‡¹ ðŸ‡º ðŸ‡» ðŸ‡¼ ðŸ‡½ ðŸ‡¾ ðŸ‡¿'),
  vigS('ðŸ„° ðŸ„± ðŸ„² ðŸ„³ ðŸ„´ ðŸ„µ ðŸ„¶ ðŸ„· ðŸ„¸ ðŸ„¹ ðŸ„º ðŸ„» ðŸ„¼ ðŸ„½ ðŸ„¾ ðŸ„¿ ðŸ…€ ðŸ… ðŸ…‚ ðŸ…ƒ ðŸ…„ ðŸ…… ðŸ…† ðŸ…‡ ðŸ…ˆ ðŸ…‰'),
  vigS('ðŸ…° ðŸ…± ðŸ…² ðŸ…³ ðŸ…´ ðŸ…µ ðŸ…¶ ðŸ…· ðŸ…¸ ðŸ…¹ ðŸ…º ðŸ…» ðŸ…¼ ðŸ…½ ðŸ…¾ ðŸ…¿ ðŸ†€ ðŸ† ðŸ†‚ ðŸ†ƒ ðŸ†„ ðŸ†… ðŸ†† ðŸ†‡ ðŸ†ˆ ðŸ†‰'),
  vigS('ð”„ ð”… â„­ ð”‡ ð”ˆ ð”‰ ð”Š â„Œ â„‘ ð” ð”Ž ð” ð” ð”‘ ð”’ ð”“ ð”” â„œ ð”– ð”— ð”˜ ð”™ ð”š ð”› ð”œ â„¨'),
  vigS('ð”ž ð”Ÿ ð”  ð”¡ ð”¢ ð”£ ð”¤ ð”¥ ð”¦ ð”§ ð”¨ ð”© ð”ª ð”« ð”¬ ð”­ ð”® ð”¯ ð”° ð”± ð”² ð”³ ð”´ ð”µ ð”¶ ð”·'),
  vigS('ð’œ ðµ ð’ž ð’Ÿ ð¸ ð¹ ð’¢ ð» ð¼ ð’¥ ð’¦ ð¿ ð‘€ ð’© ð’ª ð’« ð’¬ ð‘… ð’® ð’¯ ð’° ð’± ð’² ð’³ ð’´ ð’µ'),
  vigS('ð’¶ ð’· ð’¸ ð’¹ ð‘’ ð’» ð‘” ð’½ ð’¾ ð’¿ ð“€ ð“ ð“‚ ð“ƒ ð‘œ ð“… ð“† ð“‡ ð“ˆ ð“‰ ð“Š ð“‹ ð“Œ ð“ ð“Ž ð“'),
  vigS('âœŒ ðŸ‘Œ ðŸ‘ ðŸ‘Ž â˜œ â˜ž â˜ â˜Ÿ âœ‹ â˜º ðŸ˜ â˜¹ ðŸ’£ â˜  âš ðŸ± âœˆ â˜¼ ðŸ’§ â„ ðŸ•† âœž ðŸ•ˆ âœ  âœ¡ â˜ª'),
  vigS('â™‹ â™Œ â™ â™Ž â™ â™ â™‘ â™’ â™“ ðŸ™° ðŸ™µ â— â â–  â–¡ â—» â‘ â’ â¬§ â§« â—† â– â¬¥ âŒ§ â“ âŒ˜'),
  vigS('Ã€Ã‡ÄŠá¸ŒÈ„È¨ÄœÇ¦á¸¢ÃÄ´á¸²Åƒá¹„Ã”Æ á»ŒÅ–Èá¹šÅ¢Ã›á¹²Å´áº„áº', 1),
  vigS('Ã Ã§Ä‰á¸‹Ä›È…È©á¸ŸÇ§Ã­Ä­á»‹á¸±Å€á¹ƒÃ´Æ¡Å•È‘á¹™Å¡á¹±Ã»Å±áºƒáº', 1),
  vigS('ÃÄŒá¸ÃˆÈ†Äžá¸¤ÃŽÄ¶Ç¨á¸¶Å…á¹†Ã•È®Å˜È’á¹ Å¤ÃœÆ¯á¹´á»¤áº†Å¶áº’', 1),
  vigS('Ã¡Ä‹á¸Ã¨È‡Äá¸£Ã®ÄµÇ©á¸³Å„á¹…ÃµÈ¯á»Å—È“á¹›Å£Ã¼Æ°á¹³Åµáº…áº‘', 1),
  vigS('Ã‚Çá¸€áº ÄŽá¸’Ã‰Ä Ç´á¸¦ÃÈˆÄ¹á¸¼Å‡á¹ŠÃ–Åšá¹¢Å¨È”á¹¶áºˆÃÅ¸á»²', 1),
  vigS('Ã¢ÇŽÄá¸‘Ã©ÄŸÇµá¸¥Ã¯È‰Ä·É«á¸·Å†á¹‡Ã¶Å™á¹¡Å¥È•á¹µá»¥áº‡Ã½Å·áº“', 1),
  vigS('ÃƒÄ‚á¸‚ÃŠÄ”á¸˜áº¸Ä¢á¸¨ÇÈŠÄ»á¸¾Ã‘Ç¸Ã˜ÅŽá¹”Åœá¹ªÅ¬È–á¹¾áºŠá»´Å¹', 1),
  vigS('Ã£á¸áº¡Äá¸“ÃªÄ¡á¸§ÇÈ‹Äºá¸½Ã±ÅˆÇ¹á¹‹Ã¸Å›á¹£Å©È—á¹·áº‰Ã¿á»³Åº', 1),
  vigS('Ã„È€á¸„Ä†Ã‹Ä–á¸šáº¼Ä¤Èžá¸ªÄ½á¹€Ã’ÅÇ‘ÈŒá¹–Åžá¹¬Ã™Å®áº€áºŒá»¸Å»', 1),
  vigS('Ã¤ÄƒÈá¸ƒÃ«Ä•á¸™áº¹Ä£ÈŸá¸©Ä¼á¸¿Ã²ÅÇ’Èá¹•Åá¹«Ã¹Å­á¹¿áº‹á»µÅ¼', 1),
  vigS('Ã…È‚È¦Äˆá¸ŠÄšá¸žÃŒÄ¬á»Šá¸°Ä¿â±¢á¹‚Ã“ÈŽÅ”á¹˜Å á¹°ÃšÅ°Ç“áº‚áºŽÅ½', 1),
  vigS('Ã¥ÈƒÈ§á¸…Ä‡Ä—á¸›áº½Ä¥á¸«Ã¬Ä¾á¹Ã³Å‘Èá¹—ÅŸá¹­ÃºÅ¯Ç”áºáºá»¹Å¾', 1),
  vigS('áº² Æ‚ â‚¿ â‚µ â†ƒ á´… Æ á»„ â‚£ êœ° Ä¦ Éˆ â‚­ ÊŸ Æ ÅŒ á»œ È¢ êŸ¼ Ê€ â±¤ $ áºž á´› Ãž Æ²'),
  vigS('É’ áº« Ê¤ & Éœ á»ƒ È¹ É¦ Ê® Ä« Ç° á¶„ ê Æ› Ð» É° á»¡ Éº Ê‡ Ã¾ áµº Å« á¶Œ â±± Ë£ Ê'),
  vigS('Ä€ Èº áº¢ áº¶ â„ƒ Æ á´‡ á»† â±§ Ä¨ Â£ â‚¦ âˆ… Æ† ÆŸ á»  Å’ ê­¥ ÉŒ Ê Ñ êœ± â‚® â‚¸ á´œ Æµ'),
  vigS('Ä áº­ á»… Î² È¼ Ê¥ É Æ£ É§ Ê¯ Ä¯ á¶… É± Ð½ É” ê áµ½ É» Â§ Êˆ êœ© Å³ á»§ á¶ È Ê‘'),
  vigS('Ä„ áº¨ ðŸœ‡ Æ‡ È» â„„ áºº Æ“ á»ˆ Æ¢ Äª á´Š ê€ â‚± â™‡ â‚§ â‚¹ Å¦ á»¦ á´  Ó¾ Â¥ ÉŽ Ê Æ· â±«'),
  vigS('Âª Ä… áº¯ êœ³ á´‚ È¡ É‡ Éž á»‡ Ê° Ä± É¨ á¶† É² Æ¥ ê— É½ Ï Å¿ É• Ê¦ Ê‰ áµ¾ á»¯ Ê’ á¶Ž'),
  vigS('áºª Éƒ à¸¿ Ê— Ä ÆŠ â„‰ áº¾ â±» Æ” Ç¤ É¢ â‚² Ä® á´‹ â‚º á»Ž Â¶ â¡ ê– â‚¨ Æ© Åª á»® ðŸœˆ á´¡'),
  vigS('áº³ êœµ Æ€ Ï‡ Ä‘ É– á¶‘ Êš É© á»‰ É‰ ÉŸ Ê² Å‚ êžŽ Âµ É³ á¶‡ á´” È£ É¾ Æ« Ê§ ÊŠ áµ¿ á»·'),
  vigS('á´€ áº¬ â‚³ Ã† Ê™ â¸¿ Ä’ á»€ Æ— Éª Å â…ƒ â±  á´ â‚¼ ðŸ« êž Æ‹ á»– Æ® Å² É„ Ç· â‚© á»¶ á´¢'),
  vigS('áº· êœ· á¶€ Æˆ Ä“ É˜ áµŠ É¡ Ê È´ É¬ á»» êž‘ Å‹ Âº Éµ Ï‰ á» á¶ˆ É É¿ Æ­ á¶¿ Ê¨ Ê‹ Ê·'),
  vigS('áº® Æ ðŸ¬ á´„ â‚¡ Ã Ä˜ ÆŽ É† á»‚ â‚¬ êŸ» Êœ Æœ ÅŠ É´ á´ á»š á´© â‚½ â…Š â±£ â‚´ ê™„ Æ± Èœ'),
  vigS('êœ¹ Æ Ð´ á¶ Ä™ É™ áº» Ê© É£ Ë  ê­¡ Êž É­ Èµ â¿ áµ‘ Å á»— É¶ á¶‰ Ê‚ áº› ÃŸ ÊŒ É Æ¶'),
  vigS('É áº£ Ã¦ êœ» Ê  Éš Ðµ áº¿ Æ’ á¶‚ É¤ Ä§ Ë¡ Êª É® â‚¥ á»› Å“ É· Êƒ á¶Š È¶ áµ— ê­£ Æ¿ Ê'),
  vigS('É‘ áº© ðŸ› êœ½ â‚« È¸ Ê£ É› á» É¸ Ç¥ á¶ƒ É¥ Ä© Ð¸ Æ™ ÊŽ Ê« É¯ á» Ê… Ë¢ á¶‹ Å§ Ã° áµ«')),
vigStr, vigKey, vigKeyI, vigOrdLoCh = ch => ch.charCodeAt()-97,
vigfilt = x => {
  var y = x.match(/[a-z]/gi);
  if (y === null) return false;
  else {
    vigk.value = x.replace(/[^a-z]/gi, '');
    return y.join``.toLowerCase();
  }
}, vigcrp = decBool => {
  vigKeyI = 0;
  vigStr = outp.value;
  vigKey = vigfilt(vigk.value);
  if (!vigKey) {
    vigwrn.innerHTML = 'Key must contain at least one letter';
    return;
  } else vigwrn.innerHTML = '<br>';
  if (decBool)
    vigKey = vigKey.split``.map(e => vigSL[(26-vigOrdLoCh(e))%26]);
  outp.value = vigStr.replace(/[\ud800-\udfff]{2}|[^\ud800-\udfff]/g,
    e => {
      var idx = vigBigArr.indexOf(e);
      if (~idx) {
        var res = vigBigArr[
          (idx/26|0)*26+(idx%26+vigOrdLoCh(vigKey[vigKeyI++%vigKey.length]))%26
        ];
        return res;
      } else return e;
    }
  );
  fcs();
};
vigenc.onclick = () => { vigcrp(); };
vigdec.onclick = () => { vigcrp(1); };